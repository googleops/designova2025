<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta
      http-equiv="Content-Security-Policy"
      content="upgrade-insecure-requests"
    />
    <meta
      http-equiv="Strict-Transport-Security"
      content="max-age=31536000; includeSubDomains; preload"
    />
    <meta
      name="description"
      content="Zuper Dog - Fast food! Nikmati hotdog dan snack lezat dengan suasana seru."
    />
    <meta
      name="keywords"
      content="Zuper Dog, fast food, hotdog, snack, Gen Z, makanan kekinian"
    />
    <meta name="author" content="TTB" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Zuper Dog! - TTB</title>
    <link rel="canonical" href="https://zuperdog.vercel.app/" />
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    <meta
      http-equiv="Strict-Transport-Security"
      content="max-age=31536000; includeSubDomains; preload"
    />
    <meta
      http-equiv="Referrer-Policy"
      content="strict-origin-when-cross-origin"
    />
    <meta http-equiv="Permissions-Policy" content="interest-cohort=()" />
    <meta http-equiv="Cache-Control" content="max-age=31536000" />
    <meta
      name="robots"
      content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"
    />
    <meta
      property="og:title"
      content="Zuper Dog! - Modern Fast Food Experience"
    />
    <meta
      property="og:description"
      content="Zuper Dog - Fast food! Nikmati hotdog dan snack lezat dengan suasana seru."
    />
    <meta
      http-equiv="Content-Security-Policy"
      content="upgrade-insecure-requests; default-src https: 'self'; img-src 'self' https: data:; media-src 'self' https:; font-src 'self' https://fonts.gstatic.com; script-src 'self' https: 'unsafe-inline'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; connect-src 'self' https:;"
    />
    z
    <!-- Performance optimizations -->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="dns-prefetch" href="https://fonts.gstatic.com" />
    <link rel="preload" href="./click.mp3" as="audio" fetchpriority="high" />
    <link rel="preload" href="./main.mp3" as="audio" fetchpriority="high" />

    <link
      rel="preload"
      as="font"
      href="starborn/Starborn.ttf"
      crossorigin="anonymous"
      type="font/ttf"
      crossorigin
    />
    <link rel="icon" href="./images/favicon.ico" type="image/x-icon" />
    <link
      rel="preconnect"
      href="https://fonts.googleapis.com"
      crossorigin="anonymous"
    />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      rel="preload"
      href="https://fonts.googleapis.com/css2?family=Bubblegum+Sans&display=swap"
      crossorigin="anonymous"
      as="style"
      onload="this.onload=null;this.rel='stylesheet'"
      crossorigin="anonymous"
    />
    <meta
      name="theme-color"
      content="#000000"
      media="(prefers-color-scheme: dark)"
    />
    <meta
      name="theme-color"
      content="#ffffff"
      media="(prefers-color-scheme: light)"
    />
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="images/logo.png" sizes="32x32" />
    <link rel="apple-touch-icon" href="images/logo.png" sizes="180x180" />
    <meta name="theme-color" content="#4a2c1a" />

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      /* Force fixed full-viewport layout to prevent scrolling on mobile */
      html,
      body {
        height: 100%;
        width: 100%;
        overflow: hidden;
        position: fixed;
      }

      /* Fallback font while custom font loads */
      @font-face {
        font-family: "Bubblegum Sans";
        font-style: normal;
        font-weight: 400;
        font-display: swap;
        src: local("Bubblegum Sans"), local("BubblegumSans-Regular");
      }

      @keyframes spark {
        0% {
          opacity: 0;
          transform: scale(0) rotate(0deg);
        }
        50% {
          opacity: 1;
          transform: scale(1) rotate(180deg);
        }
        100% {
          opacity: 0;
          transform: scale(0) rotate(360deg);
        }
      }

      .spark {
        position: absolute;
        width: 4px;
        height: 4px;
        background: #ff4444;
        border-radius: 50%;
        box-shadow: 0 0 10px #ff4444, 0 0 20px #ff4444, 0 0 30px #ff4444,
          0 0 40px #ff4444;
        pointer-events: none;
        z-index: 1000;
      }

      body {
        overflow: hidden;
        font-family: Arial, sans-serif;
        transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .fade-out {
        animation: fadeOut 1s forwards;
      }

      @keyframes fadeOut {
        from {
          opacity: 1;
        }
        to {
          opacity: 0;
        }
      }

      @keyframes gradientAnimation {
        0% {
          background-position: 0% 0%;
        }
        25% {
          background-position: 100% 0%;
        }
        50% {
          background-position: 100% 100%;
        }
        75% {
          background-position: 0% 100%;
        }
        100% {
          background-position: 0% 0%;
        }
      }

      .spotlight-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(45deg, #000000, #1a0000, #2a0000, #000000);
        background-size: 300% 300%;
        z-index: 1;
        animation: gradientAnimation 8s ease-in-out infinite;
      }

      .spotlight {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 600px;
        height: 600px;
        background: radial-gradient(
          circle,
          rgba(154, 19, 19, 0.412) 0%,
          rgba(0, 0, 0, 0) 70%
        );
        pointer-events: none;
        z-index: 2;
      }

      .container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 3;
        opacity: 1;
        content-visibility: auto;
        contain-intrinsic-size: 0 500px;
      }

      .container.fade-in {
        animation: fadeIn 2s ease-in forwards;
      }

      @keyframes fadeIn {
        to {
          opacity: 1;
        }
      }

      @keyframes swing {
        0%,
        100% {
          transform: rotate(-5deg);
        }
        50% {
          transform: rotate(5deg);
        }
      }

      @keyframes bounce {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-20px);
        }
      }

      @keyframes blink-text {
        0%,
        100% {
          opacity: 0.6;
        }
        50% {
          opacity: 0.95;
        }
      }

      @keyframes fade-up-out {
        0% {
          opacity: 1;
          transform: translateX(-50%) translateY(0);
        }
        100% {
          opacity: 0;
          transform: translateX(-50%) translateY(-20px);
        }
      }

      @keyframes blink-face {
        0%,
        100% {
          opacity: 0.85;
        }
        50% {
          opacity: 1;
        }
      }

      @keyframes titleGlow {
        0% {
          color: #ff4444;
          text-shadow: 0 0 15px #ff4444;
        }
        50% {
          color: #ff6666;
          text-shadow: 0 0 30px #ff4444, 0 0 50px #ff4444, 0 0 70px #ff4444;
        }
        100% {
          color: #ff4444;
          text-shadow: 0 0 15px #ff4444;
        }
      }

      .title {
        position: absolute;
        top: 110px;
        left: 44%;
        transform: translateX(-50%);
        text-align: center;
        color: #ff4444;
        text-shadow: 0 0 15px #ff4444;
        animation: swing 3s ease-in-out infinite,
          titleGlow 3s ease-in-out infinite;
        z-index: 4;
        font-family: "Comic Sans MS", cursive;
        opacity: 0;
        transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        line-height: 1.2;
      }

      .zuper {
        font-size: 64px;
        display: flex;
        justify-content: center;
        margin-bottom: 5px;
        position: relative;
      }

      .zuper span {
        display: inline-block;
        animation: float 2s ease-in-out infinite;
      }

      .zuper span:nth-child(1) {
        transform: rotate(-15deg) translateY(5px);
      }
      .zuper span:nth-child(2) {
        transform: rotate(-10deg) translateY(2px);
      }
      .zuper span:nth-child(3) {
        transform: rotate(-5deg) translateY(0px);
      }
      .zuper span:nth-child(4) {
        transform: rotate(0deg) translateY(-1px);
      }
      .zuper span:nth-child(5) {
        transform: rotate(5deg) translateY(0px);
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0) rotate(var(--rotation));
        }
        50% {
          transform: translateY(-5px) rotate(var(--rotation));
        }
      }

      .dog {
        font-size: 64px;
        display: block;
      }

      .dog-o {
        display: inline-block;
        position: relative;
        animation: bounce 1s ease-in-out infinite;
        background-color: #ff4444;
        border-radius: 50%;
        width: 48px;
        height: 48px;
        line-height: 48px;
        text-align: center;
        box-shadow: 0 0 15px #ff4444;
        margin: 0 2px;
      }

      .ear-left,
      .ear-right {
        position: absolute;
        width: 16px;
        height: 28px;
        background: #ff4444;
        border-radius: 25px;
        top: -22px;
        box-shadow: 0 0 15px #ff4444;
      }

      .ear-left {
        left: 4px;
        transform: rotate(-20deg);
      }

      .ear-right {
        right: 4px;
        transform: rotate(20deg);
      }

      .face {
        width: 250px;
        height: 150px;
        position: relative;
        cursor: pointer;
        transition: transform 0.3s ease;
        margin: 0 auto;
      }

      .face:hover {
        transform: scale(1.05);
      }

      .hover-text {
        position: absolute;
        top: -50px;
        left: 50%;
        width: 100%;
        transform: translateX(-50%) translateY(20px);
        background-color: transparent;
        color: #ff4444;
        padding: 5px 0;
        text-align: center;
        font-size: 18px;
        text-shadow: 0 0 10px #ff4444;
        white-space: nowrap;
        opacity: 0;
        transition: all 1.2s cubic-bezier(0.215, 0.61, 0.355, 1);
        font-family: "Comic Sans MS", cursive;
        pointer-events: none;
      }

      .loading-bar {
        position: absolute;
        bottom: -40px;
        left: 50%;
        transform: translateX(-50%);
        width: 200px;
        height: 4px;
        background: rgba(255, 68, 68, 0.2);
        border-radius: 2px;
        overflow: hidden;
        opacity: 0;
        transition: opacity 0.5s ease;
        will-change: transform, opacity;
      }

      .loading-progress {
        width: 0%;
        height: 100%;
        background: #ff4444;
        box-shadow: 0 0 10px #ff4444;
        transition: width 3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .food-button {
        position: absolute;
        bottom: -120px;
        left: 50%;
        transform: translateX(-50%) scale(0.8);
        padding: 12px 40px;
        background: transparent;
        color: #ff4444;
        border: 2px solid #ff4444;
        border-radius: 50px;
        font-family: "Bubblegum Sans", "Comic Sans MS", cursive;
        font-size: 20px;
        letter-spacing: 3px;
        word-spacing: 6px;
        cursor: pointer;
        opacity: 0;
        transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        text-transform: uppercase;
        box-shadow: 0 0 10px rgba(255, 68, 68, 0.3);
        white-space: nowrap;
      }

      .food-button:hover {
        background: #ff4444;
        color: white;
        box-shadow: 0 0 30px #ff4444;
        transform: translateX(-50%) scale(0.85);
        text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
      }

      @import url("https://fonts.googleapis.com/css2?family=Bubblegum+Sans&display=swap");

      .food-button:hover {
        transform: translateX(-50%) scale(1);
        box-shadow: 0 0 25px #ff4444;
      }

      @keyframes borderGlow {
        0% {
          border-color: #ff4444;
          box-shadow: 0 0 20px #ff4444, inset 0 0 20px #ff4444;
        }
        50% {
          border-color: #ff6666;
          box-shadow: 0 0 40px #ff4444, inset 0 0 40px #ff4444;
        }
        100% {
          border-color: #ff4444;
          box-shadow: 0 0 20px #ff4444, inset 0 0 20px #ff4444;
        }
      }

      .name-input-container {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(0, 0, 0, 0.9);
        padding: 30px;
        border-radius: 20px;
        border: 2px solid #ff4444;
        box-shadow: 0 0 20px #ff4444;
        text-align: center;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.5s ease;
        z-index: 1000;
      }

      .name-input-container.show {
        opacity: 1;
        visibility: visible;
        animation: borderGlow 2s ease-in-out infinite;
      }

      @keyframes shake {
        0%,
        100% {
          transform: translateX(0);
        }
        25% {
          transform: translateX(-10px);
        }
        75% {
          transform: translateX(10px);
        }
      }

      .error-message {
        color: #ff4444;
        font-size: 14px;
        margin-top: 5px;
        opacity: 0;
        transform: translateY(-10px);
        transition: all 0.3s ease;
      }

      .error-message.show {
        opacity: 1;
        transform: translateY(0);
      }

      .name-input-container input {
        width: 250px;
        padding: 12px;
        margin: 10px 0 5px 0;
        border: 2px solid #ff4444;
        background: transparent;
        color: #ff4444;
        font-size: 18px;
        font-family: "Comic Sans MS", cursive;
        text-align: center;
        border-radius: 10px;
        outline: none;
        transition: all 0.3s ease;
      }

      .name-input-container input.shake {
        animation: shake 0.5s ease-in-out;
        border-color: #ff2222;
        box-shadow: 0 0 15px #ff2222;
      }

      .name-input-container input:focus {
        box-shadow: 0 0 15px #ff4444;
      }

      .name-input-container button {
        padding: 10px 20px;
        margin-top: 10px;
        background: #ff4444;
        border: none;
        border-radius: 20px;
        color: white;
        font-family: "Comic Sans MS", cursive;
        font-size: 16px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .name-input-container button:hover {
        transform: scale(1.1);
        box-shadow: 0 0 15px #ff4444;
      }

      .name-input-container h2 {
        color: #ff4444;
        font-family: "Comic Sans MS", cursive;
        margin-bottom: 20px;
        text-shadow: 0 0 10px #ff4444;
      }

      .loading .loading-bar {
        opacity: 1;
      }

      .loading .loading-progress {
        width: 100%;
      }

      .greeting-text {
        position: absolute;
        bottom: -20px;
        left: 50%;
        transform: translateX(-50%) translateY(-20px);
        width: 100%;
        text-align: center;
        color: #ff4444;
        font-family: "Comic Sans MS", cursive;
        text-shadow: 0 0 15px #ff4444;
        opacity: 0;
        display: none;
        pointer-events: none;
        z-index: 100;
        transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .greeting-text.show {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
      }

      .greeting-text .name {
        font-size: 30px;
        margin-bottom: 5px;
        filter: drop-shadow(0 0 8px #ff4444);
      }

      .greeting-text .thanks {
        font-size: 18px;
        color: #ff6b6b;
        filter: drop-shadow(0 0 5px #ff4444);
      }

      .greeting-text .user-name {
        color: #ffffff;
        text-shadow: 0 0 20px #ff4444;
        font-weight: bold;
      }

      .loaded .food-button {
        opacity: 1;
      }

      body:not(.happy) .face:hover .hover-text {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
        animation: blink-text 3s ease-in-out infinite;
      }

      body:not(.happy) .face:not(:hover) .hover-text {
        animation: fade-up-out 1.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
      }

      body:not(.happy) .face,
      body:not(.happy) .mouth-path {
        animation: blink-face 2s ease-in-out infinite;
      }

      .face:active {
        transform: scale(0.95);
      }

      .volume-text {
        position: absolute;
        bottom: -35px;
        left: 50%;
        transform: translateX(-50%) translateY(10px);
        color: #ff4444;
        font-size: 14px;
        opacity: 0;
        transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        text-align: center;
        width: 100%;
        font-family: "Fredoka", sans-serif;
        white-space: nowrap;
        pointer-events: none;
      }

      body:not(.happy):not(.loading) .face:hover .volume-text {
        opacity: 0.7;
        transform: translateX(-50%) translateY(0);
      }

      .loading .volume-text {
        opacity: 0 !important;
        transform: translateX(-50%) translateY(20px);
        transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
      }

      @keyframes blink {
        0%,
        45%,
        55%,
        100% {
          transform: scaleY(1);
          box-shadow: 0 0 15px #ff4444;
        }
        50% {
          transform: scaleY(0.1);
          box-shadow: 0 0 5px #ff4444;
        }
      }

      @keyframes eyeFlash {
        0%,
        100% {
          box-shadow: 0 0 15px #ff4444;
          filter: brightness(1.2);
        }
        50% {
          box-shadow: 0 0 25px #ff4444;
          filter: brightness(1.8);
        }
      }

      .eye {
        width: 12px;
        height: 18px;
        background: #ff4444;
        border-radius: 50%;
        position: absolute;
        top: 25px;
        box-shadow: 0 0 15px #ff4444;
        filter: brightness(1.2);
        transform-origin: center;
        will-change: transform;
      }

      .eye.left {
        left: 70px;
      }

      .eye.right {
        right: 70px;
      }

      .eye::after {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        width: 6px;
        height: 6px;
        background: #ff2222;
        border-radius: 50%;
        transform: translate(-50%, -50%);
        box-shadow: 0 0 8px #ff2222;
        filter: brightness(1.5);
        animation: eyeFlash 2s infinite;
      }

      .mouth {
        position: absolute;
        bottom: 65px;
        left: 50%;
        transform: translateX(-50%);
        width: 180px;
        height: 30px;
      }

      .mouth-svg {
        width: 100%;
        height: 100%;
      }

      .mouth-path {
        fill: none;
        stroke: #ff4444;
        stroke-width: 5;
        stroke-linecap: round;
        transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        filter: drop-shadow(0 0 8px #ff4444);
      }

      /* Happy mouth - curve up */
      .mouth-path.sad {
        d: path("M 0 30 Q 100 0 200 30");
      }

      /* Sad mouth - curve down */
      .mouth-path.happy {
        d: path("M 0 10 Q 100 40 200 10");
      }

      /* Happy state */
      body.happy {
        background: linear-gradient(45deg, #000000 0%, #b22222 100%) !important;
      }

      body.happy .spotlight-bg {
        background: linear-gradient(45deg, #000000 0%, #b22222 100%);
        transition: background 0.8s cubic-bezier(0.4, 0, 0.2, 1);
      }

      body.happy .spotlight {
        opacity: 0;
        transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1);
      }

      body.happy .title {
        opacity: 1;
      }

      /* Flash effect */
      .flash-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #ff4444;
        opacity: 0;
        pointer-events: none;
        z-index: 9999;
      }

      @keyframes flash {
        0%,
        100% {
          opacity: 0;
        }
        25%,
        75% {
          opacity: 0.8;
        }
        50% {
          opacity: 1;
        }
      }

      .music-control {
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 40px;
        height: 40px;
        background: transparent;
        border: none;
        cursor: pointer;
        z-index: 1000;
        opacity: 0;
        transition: opacity 0.5s ease;
      }

      .music-control.show {
        opacity: 1;
      }

      .music-icon {
        width: 100%;
        height: 100%;
        position: relative;
      }

      @keyframes musicWave {
        0% {
          height: 5px;
        }
        50% {
          height: 20px;
        }
        100% {
          height: 5px;
        }
      }

      .music-bar {
        position: absolute;
        bottom: 0;
        width: 4px;
        background: #ff4444;
        border-radius: 2px;
        box-shadow: 0 0 10px #ff4444;
        animation: musicWave 1s ease-in-out infinite;
      }

      .music-bar:nth-child(1) {
        left: 4px;
        animation-delay: 0s;
        height: 15px;
      }

      .music-bar:nth-child(2) {
        left: 12px;
        animation-delay: 0.2s;
        height: 20px;
      }

      .music-bar:nth-child(3) {
        left: 20px;
        animation-delay: 0.4s;
        height: 10px;
      }

      .music-bar:nth-child(4) {
        left: 28px;
        animation-delay: 0.6s;
        height: 18px;
      }

      .music-control.muted .music-bar {
        animation: none;
        height: 3px !important;
        opacity: 0.5;
      }

      @keyframes notificationAnimation {
        0% {
          opacity: 0;
          transform: translateY(-20px);
        }
        10% {
          opacity: 1;
          transform: translateY(0);
        }
        80% {
          opacity: 1;
          transform: translateY(0);
        }
        100% {
          opacity: 0;
          transform: translateY(-10px);
        }
      }

      @keyframes textGlow {
        0%,
        100% {
          text-shadow: 0 0 15px #ff4444;
          filter: brightness(1);
        }
        50% {
          text-shadow: 0 0 25px #ff4444, 0 0 35px #ff4444;
          filter: brightness(1.2);
        }
      }

      .now-playing {
        position: fixed;
        top: 20px;
        right: 20px;
        background: rgba(0, 0, 0, 0.9);
        padding: 15px 25px;
        border-radius: 15px;
        border: 2px solid #ff4444;
        color: #ff4444;
        font-family: "Comic Sans MS", cursive;
        font-size: 18px;
        font-weight: bold;
        box-shadow: 0 0 20px rgba(255, 68, 68, 0.4);
        opacity: 0;
        z-index: 9999;
        pointer-events: none;
        display: none;
        white-space: nowrap;
        letter-spacing: 1px;
        backdrop-filter: blur(5px);
        text-align: center;
      }

      .headphone-icon {
        font-size: 20px;
        margin-right: 8px;
        display: inline-block;
        vertical-align: -3px;
        line-height: 1;
        filter: drop-shadow(0 0 8px rgba(255, 68, 68, 0.8));
      }

      .now-playing .song-title {
        font-size: 14px;
        margin-top: 8px;
        opacity: 0.9;
        font-weight: normal;
      }
    </style>
  </head>

  <body style="background: #000; visibility: visible">
    <div class="spotlight-bg" style="opacity: 1"></div>
    <div class="spotlight" style="opacity: 1"></div>

    <div class="now-playing" id="nowPlaying" aria-live="polite">
      <div>
        <span class="headphone-icon" aria-hidden="true">üéß</span>NOW PLAYING...
      </div>
      <div class="song-title">No More Excuses (feat. Tory Lanez)</div>
    </div>

    <button
      class="music-control"
      id="musicControl"
      aria-label="Kendalikan musik latar"
    >
      <div class="music-icon">
        <div class="music-bar"></div>
        <div class="music-bar"></div>
        <div class="music-bar"></div>
        <div class="music-bar"></div>
      </div>
    </button>

    <audio id="backgroundMusic" preload="none" loop>
      <source src="./main.mp3" type="audio/mpeg" />
      Your browser does not support the audio element.
    </audio>

    <!-- Placeholder for content while JS loads -->
    <noscript>
      <div style="color: white; text-align: center; padding: 20px">
        Please enable JavaScript to experience this website.
      </div>
    </noscript>

    <div class="title" style="visibility: visible">
      <div class="zuper">
        <span style="--rotation: -15deg">Z</span>
        <span style="--rotation: -10deg">U</span>
        <span style="--rotation: -5deg">P</span>
        <span style="--rotation: 0deg">E</span>
        <span style="--rotation: 5deg">R</span>
      </div>
      <span class="dog"
        >D<span class="dog-o"
          >O<span class="ear-left"></span><span class="ear-right"></span></span
        >G</span
      >
    </div>

    <div class="container">
      <div
        class="face"
        id="face"
        role="img"
        aria-label="Wajah lapar minta tap untuk makan"
      >
        <div class="hover-text">I'm hungry :( tap to help me</div>
        <div class="volume-text">
          Before you tap, make sure the sound‚Äôs vibin
        </div>
        <div class="eye left">
          <div class="pupil" id="pupilLeft"></div>
        </div>
        <div class="eye right">
          <div class="pupil" id="pupilRight"></div>
        </div>
        <div class="mouth">
          <svg class="mouth-svg" viewBox="0 0 200 40">
            <path
              class="mouth-path sad"
              id="mouthPath"
              d="M 0 10 Q 100 40 200 10"
              aria-hidden="true"
              focusable="false"
            />
          </svg>
        </div>
        <div class="loading-bar">
          <div class="loading-progress"></div>
        </div>
        <div class="greeting-text">
          <div class="name">Hi <span class="user-name"></span></div>
          <div class="thanks">Aww, thanks for saving me ‚ù§</div>
        </div>
        <button class="food-button" aria-label="Berikan makanan">
          YOUR FOOD
        </button>
      </div>
    </div>

    <div class="name-input-container">
      <h2>Who dis?</h2>
      <input
        type="text"
        id="nameInput"
        placeholder="Type your name..."
        maxlength="20"
      />
      <div class="error-message" id="errorMessage">
        Aight, name first then üòé
      </div>
      <button id="submitName" aria-label="Kirim nama untuk mulai makan">
        Let's eat!
      </button>
    </div>

    <!-- üõ†Ô∏è Noscript buat kasih info kalau JavaScript mati -->
    <noscript>
      <div style="color: white; text-align: center; padding: 20px">
        Please enable JavaScript to experience this website.
      </div>
    </noscript>
    <script src="./main.js" defer crossorigin="anonymous"></script>
    <script src="./click.js" defer crossorigin="anonymous"></script>

    <script>
      // Performance optimization for animations
      document.documentElement.style.contentVisibility = "auto";
      document.documentElement.style.containIntrinsicSize = "1px 5000px";

      // Create and load click sound in advance
      const clickSound = new Audio("click.mp3");
      clickSound.volume = 1.0; // Set volume to maximum
      clickSound.setAttribute("preload", "auto");

      // Function to handle button click and sound
      document
        .getElementById("submitName")
        .addEventListener("click", function (e) {
          // Play sound immediately
          clickSound.currentTime = 0; // Reset sound to start
          clickSound.play();
        });

      // Fungsi untuk membuat spark
      function createSpark() {
        const spark = document.createElement("div");
        spark.className = "spark";

        // Random position
        const x = Math.random() * window.innerWidth;
        const y = Math.random() * window.innerHeight;

        spark.style.left = x + "px";
        spark.style.top = y + "px";

        document.body.appendChild(spark);

        // Animasi spark
        spark.style.animation = `spark ${
          0.5 + Math.random() * 1
        }s ease-out forwards`;

        // Hapus spark setelah animasi selesai
        spark.addEventListener("animationend", () => {
          spark.remove();
        });
      }

      let sparkInterval;

      // Buat spark secara periodik
      function startSparks() {
        if (!sparkInterval) {
          sparkInterval = setInterval(() => {
            const numberOfSparks = Math.floor(Math.random() * 3) + 1;
            for (let i = 0; i < numberOfSparks; i++) {
              setTimeout(createSpark, Math.random() * 200);
            }
          }, 500);
        }
      }

      function stopSparks() {
        if (sparkInterval) {
          clearInterval(sparkInterval);
          sparkInterval = null;
          // Hapus semua spark yang ada
          document
            .querySelectorAll(".spark")
            .forEach((spark) => spark.remove());
        }
      }

      const face = document.getElementById("face");
      const body = document.body;
      const mouthPath = document.getElementById("mouthPath");
      const pupilLeft = document.getElementById("pupilLeft");
      const pupilRight = document.getElementById("pupilRight");
      const eyeLeft = document.querySelector(".eye.left");
      const eyeRight = document.querySelector(".eye.right");

      // Fungsi untuk menggerakkan mata mengikuti kursor
      // Fungsi untuk menggerakkan mata
      function moveEyes(e) {
        const mouseX = e.clientX;
        const mouseY = e.clientY;
        const face = document.getElementById("face");
        const faceRect = face.getBoundingClientRect();
        const faceCenterX = faceRect.left + faceRect.width / 2;
        const faceCenterY = faceRect.top + faceRect.height / 2;

        const eyes = document.querySelectorAll(".eye");
        eyes.forEach((eye) => {
          const angle = Math.atan2(mouseY - faceCenterY, mouseX - faceCenterX);
          const maxMove = 5;
          const distance = Math.min(
            Math.sqrt(
              Math.pow(mouseX - faceCenterX, 2) +
                Math.pow(mouseY - faceCenterY, 2)
            ) / 150,
            1
          );

          const moveX = Math.cos(angle) * maxMove * distance;
          const moveY = Math.sin(angle) * maxMove * distance;

          // Gabungkan transformasi untuk kedipan dan gerakan
          const currentTransform = eye.style.transform || "";
          const scaleY = currentTransform.includes("scaleY")
            ? currentTransform.match(/scaleY\((.*?)\)/)[1]
            : 1;

          eye.style.transform = `translate(${moveX}px, ${moveY}px) scaleY(${scaleY})`;
        });
      }

      // Fungsi untuk kedipan mata
      function blinkEyes() {
        const eyes = document.querySelectorAll(".eye");
        eyes.forEach((eye) => {
          const currentTransform = eye.style.transform || "";
          const translation = currentTransform.match(/translate\((.*?)\)/)
            ? currentTransform.match(/translate\((.*?)\)/)[0]
            : "translate(0px, 0px)";

          eye.style.transform = `${translation} scaleY(0.1)`;
          setTimeout(() => {
            eye.style.transform = `${translation} scaleY(1)`;
          }, 100);
        });
      }

      // Event listener untuk gerakan mata
      document.addEventListener("mousemove", moveEyes);

      // Mulai kedipan mata
      setInterval(blinkEyes, Math.random() * 2000 + 2000);

      let isHappy = false;
      let audioContext;
      let gainNode;
      let sourceNode;

      // Inisialisasi Web Audio API
      async function initAudio() {
        if (!audioContext) {
          try {
            audioContext = new (window.AudioContext ||
              window.webkitAudioContext)();
            gainNode = audioContext.createGain();
            gainNode.connect(audioContext.destination);

            if (audioContext.state === "suspended") {
              await audioContext.resume();
            }
          } catch (error) {
            console.error("Error initializing audio:", error);
          }
        }
      }

      // Fungsi untuk fade in audio
      async function fadeInAudio() {
        await initAudio();
        const audio = document.getElementById("backgroundMusic");
        const musicControl = document.getElementById("musicControl");

        try {
          if (!audio.paused) return;

          if (!sourceNode) {
            sourceNode = audioContext.createMediaElementSource(audio);
            sourceNode.connect(gainNode);
          }

          gainNode.gain.setValueAtTime(0, audioContext.currentTime);
          gainNode.gain.linearRampToValueAtTime(
            1,
            audioContext.currentTime + 2
          );

          audio.currentTime = 0;
          audio.loop = true;
          await audio.play();

          // Tampilkan kontrol musik dan notifikasi setelah musik mulai
          setTimeout(() => {
            musicControl.classList.add("show");
            showNowPlaying();
          }, 2000);

          function showNowPlaying() {
            const nowPlaying = document.getElementById("nowPlaying");
            // Reset animation
            nowPlaying.style.animation = "none";
            nowPlaying.offsetHeight; // Trigger reflow
            // Start animation
            nowPlaying.style.display = "block";
            nowPlaying.style.animation =
              "notificationAnimation 7s ease-in-out forwards, textGlow 1.5s ease-in-out infinite";

            setTimeout(() => {
              nowPlaying.style.display = "none";
            }, 7000);
          }
        } catch (error) {
          console.error("Error playing audio:", error);
        }
      }

      // Kontrol musik
      const musicControl = document.getElementById("musicControl");
      const audio = document.getElementById("backgroundMusic");

      musicControl.addEventListener("click", async () => {
        if (audio.paused) {
          // Jika musik sedang mati, nyalakan
          musicControl.classList.remove("muted");
          await fadeInAudio();
        } else {
          // Jika musik sedang nyala, matikan
          musicControl.classList.add("muted");
          gainNode.gain.setValueAtTime(
            gainNode.gain.value,
            audioContext.currentTime
          );
          gainNode.gain.linearRampToValueAtTime(
            0,
            audioContext.currentTime + 0.5
          );
          setTimeout(() => {
            audio.pause();
          }, 500);
        }
      });

      let isLoading = false;
      const foodButton = document.querySelector(".food-button");

      face.addEventListener("click", async function () {
        if (!isHappy && !isLoading) {
          // Mulai proses loading
          isLoading = true;
          face.classList.add("loading");

          // Mulai audio
          await fadeInAudio();

          // Tunggu loading selesai (3 detik)
          await new Promise((resolve) => setTimeout(resolve, 3000));

          // Mulai efek flash
          body.classList.add("flashing");

          // Tunggu flash effect selesai
          await new Promise((resolve) => setTimeout(resolve, 1200));
          body.classList.remove("flashing");

          // Create click sound
          const clickSound = new Audio("click.mp3");
          clickSound.volume = 1.0;

          // Tampilkan form input nama
          const nameContainer = document.querySelector(".name-input-container");
          const nameInput = document.getElementById("nameInput");
          const submitButton = document.getElementById("submitName");

          nameContainer.classList.add("show");
          nameInput.focus();

          // Tunggu submit nama
          await new Promise((resolve) => {
            submitButton.addEventListener("click", function handleSubmit() {
              const name = nameInput.value.trim();
              const errorMessage = document.getElementById("errorMessage");
              if (name) {
                // Play click sound immediately
                clickSound.currentTime = 0;
                clickSound.play();

                // Update user name in greeting text
                const userNameSpans = document.querySelectorAll(".user-name");
                userNameSpans.forEach((span) => (span.textContent = name));

                // Hide error message if visible
                errorMessage.classList.remove("show");

                // Hide name input container
                nameContainer.classList.remove("show");

                // Show greeting text with animation
                const greetingText = document.querySelector(".greeting-text");
                greetingText.style.display = "block";
                setTimeout(() => {
                  greetingText.classList.add("show");

                  // Update UI setelah nama disubmit
                  face.classList.remove("loading");
                  face.classList.add("loaded");
                  body.classList.add("happy");
                  mouthPath.classList.remove("sad");
                  mouthPath.classList.add("happy");
                  mouthPath.setAttribute("d", "M 0 10 Q 100 40 200 10");
                  // Mulai efek spark ketika bahagia
                  startSparks();
                }, 100);

                submitButton.removeEventListener("click", handleSubmit);
                resolve();
              } else {
                // Show error message with animation
                errorMessage.classList.add("show");
                // Shake animation on input
                nameInput.classList.add("shake");
                setTimeout(() => nameInput.classList.remove("shake"), 500);
              }
            });
          });
          isHappy = true;
          isLoading = false;
        } else if (isHappy) {
          // Kembali ke wajah sedih
          face.classList.remove("loaded");
          body.classList.remove("happy");
          mouthPath.classList.remove("happy");
          mouthPath.classList.add("sad");
          mouthPath.setAttribute("d", "M 0 30 Q 100 0 200 30");
          isHappy = false;

          // Hentikan efek spark ketika sedih
          stopSparks();

          // Hide greeting text
          const greetingText = document.querySelector(".greeting-text");
          greetingText.classList.remove("show");
          setTimeout(() => {
            greetingText.style.display = "none";
          }, 800);
        }
      });

      // Function to fade out audio and navigate
      async function fadeOutAndNavigate() {
        const audio = document.getElementById("backgroundMusic");
        const duration = 1000; // 1 second fade out
        const originalVolume = audio.volume;
        const steps = 20;
        const volumeStep = originalVolume / steps;
        const timeStep = duration / steps;

        // Start the fade out animation
        document.body.classList.add("fade-out");

        // Fade out the audio
        for (let i = steps; i >= 0; i--) {
          audio.volume = i * volumeStep;
          await new Promise((resolve) => setTimeout(resolve, timeStep));
        }

        // Navigate after the animation completes
        setTimeout(() => {
          window.location.href = "home.html";
        }, 800);
      }

      // Add click handler for Your Food button
      document.querySelector(".food-button").addEventListener("click", (e) => {
        e.stopPropagation(); // Prevent the body click event from triggering
        fadeOutAndNavigate();
      });

      // Tambahkan event listener untuk random blinking
      setInterval(() => {
        const eyes = document.querySelectorAll(".eye");
        const shouldBlink = Math.random() < 0.1; // 10% chance to blink

        if (shouldBlink) {
          eyes.forEach((eye) => {
            eye.style.setProperty("--blink-scale", "0.1");
            setTimeout(() => {
              eye.style.setProperty("--blink-scale", "1");
            }, 100);
          });
        }
      }, 1000);
    </script>
  </body>
  <link rel="preload" as="script" href="./main.js" fetchpriority="high" />
  <link rel="modulepreload" href="./main.js" fetchpriority="high" />
</html>
